# address_normalizer
日本住所の分割、正規化を行うライブラリ

## 住所分割仕様
住所を都道府県、市区町村、町域、丁目-番地-号、それ以外（ビル名、号室名）に分割します.  
TODO: 正規表現で分割するか、郵便番号のデータを使用してマッチング、分割するかどちらが性能が出るか確認しつつ実装します.  
郵便番号のデータとマッチングする場合はレコード毎に大量のループが発生するため、正規表現での分割でまず実装.

### 都道府県の分割
+ 正規表現

### 市区町村の分割
+ 正規表現

### 町域(字等)、丁目-番地-号、それ以外の分割
+ 正規表現


## 住所正規化仕様
### 記入漏れのパターン
  + 都道府県の記入が無い場合  
  都道府県の記入が無い場合は市区町村名から都道府県を類推し、補完する.
    + 同名市区町村は以下が考えられるが、さらに町域名から類推する.ただし、町域名が府中町、本町のケースはどちらの市区町村にも存在するため、完全な類推は不可能.その場合はそれぞれ、東京都府中市、北海道伊達市として補完する.
      + 府中市(東京都、広島県)
      + 伊達市(北海道、福島県)
  + 市区町村の記入が無い場合  
  市区町村の記入が無い場合はデータを保管しない. 

### 表記ゆれパターン
  + 丁目、番地、号のゆれ
    + 「1-1-1」、「1丁目1番地1号」、「一丁目一番地の一号」などは半角数字と'-'(半角ハイフン)「1-1-1」に正規化し同一データと扱う.
  + 町域の字（あざ）の有無
    + 「A市 B区 C町 大字D123」「A市 B区 C町 字D 小字C123」など **'大字','字','小字'は削除**する.
  + 市区町村、町域の送り仮名
    + '之'・'ノ'
      + '之'は市区町村で3箇所、町域では大量に使用されている.
      + 'ノ'も市区町村で3箇所、町域では大量に使用されている.
      + **町域の'之'は'ノ'に正規化する**. 市区町村は正規化なしでOK.
    + 'か'・'が'・'ヵ'・'ガ'・'ヶ'・'ケ'  
      + 'か'や'が'は送り仮名、送り仮名以外で使用している市区町村、町域が多数あるため、一律変換はできない.
      + 'ヶ'は'ケ'は市区町村、町域ともに送り仮名にしか使用されていない.(ひとつ町域に'中央マーケット'という町域が存在した.)  
      以上より、**'ヶ'は'ケ'に正規化**する.（マーケットという町域はマーケツトに変換されるが些末なこと.）

      + 'ヵ'は市区町村、町域ともに使用されているケースはない.
      + 'ガ'は市区町村名では使用されているケースが無いが、町域名では送り仮名と'ガーデン'のような送り仮名以外でも使用されている.  
      以上より、**'ヵ'は'ガ'に正規化**する.
    + 'ツ'・'ッ'
      + 'ツ'、'ッ'ともに市区町村では使用なし.町域では送り仮名、送り仮名以外でも大量に使用されている.  
      以上より、'ツ'、'ッ'は特に正規化しない.
  + 異体字
    + '竈'・'釜'・'竃'
    + '恵'・'惠'
    + '斉'・'斎'・'齋'
    + '竜'・'龍'
    + '園'・'苑'  
    など多数あり.ただし、市区町村、町域名に使用されている異字体はそれほど多くなく、

  + 漢数字、算用数字
    + 「A市 13条 一丁目一番地」、「A市 十三条 1丁目-1」など  
    **漢数字は半角数字と'-'(半角ハイフン)に正規化**.

  + 踊り字  
  愛知県東海市名和町トゝメキ１６番地の１など.  
  正規化不要.町域として切り出せれば問題ない.
+ 複雑な町域パターン
  + 京都市内の「通り名」
    + **'上ル'は'上る'に正規化.**
    + **'下ル'は'下る'に正規化.**
    + **'通リ'は'通り'は'通'に正規化.**
    + **'入る'、'入ル'は'入'に正規化.**
  + 北海道の「条」
  + 大阪府堺市の「丁」
  + 東北北部で用いられる「第○地割」
  + 愛媛県で用いられる「○番耕地」
  + 長崎県で「郷」「名」「免」「触」「浦」など  
  **以上正規化は実施しない.** 町域として切り出せれば問題ない.
  + 丁目という町域・大字・字があるパターン
    + 宮城県仙台市 仙台市若林区 六丁の目
    + 福島県喜多方市 一丁目～三丁目
    + 埼玉県春日部市 八丁目
    + 埼玉県八潮市 二丁目
    + 静岡県下田市 一丁目～六丁目  
    以上のデータは町域ではなく丁目と誤り分割されてしまう可能性があるため対策が必要.

### ビル名、階数、部屋番号があるパターン  
特に正規化を行わない.

## 前提環境
  + lombok1.8+
  + SpringFramework 
  + Commons-lang1.8+

## ビルド

## テスト

## 実行


